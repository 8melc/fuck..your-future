<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FYF Feed | Immersive Grid</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <style>
        :root {
            /* FYF Color System */
            --fyf-noir: #0A0A0A;
            --fyf-carbon: #1A1A1A;
            --fyf-charcoal: #2D2D3F;
            --fyf-smoke: #3A3A4A;
            --fyf-coral: #FF6B6B;
            --fyf-coral-dark: #E55555;
            --fyf-mint: #4ECDC4;
            --fyf-mint-dark: #3BA99F;
            --fyf-cream: #FFF8E7;
            --fyf-bone: #F5F0E8;
            --fyf-steel: #B8BCC8;
            --fyf-mauve: #9B7E9E;
            
            /* Gradients */
            --gradient-dark: linear-gradient(135deg, #0A0A0A 0%, #2D2D3F 100%);
            --gradient-carbon: linear-gradient(180deg, #1A1A1A 0%, #2D2D3F 50%, #1A1A1A 100%);
            --gradient-coral-mint: linear-gradient(90deg, #FF6B6B 0%, #4ECDC4 100%);
            --gradient-subtle: linear-gradient(135deg, #2D2D3F 0%, #3A3A4A 100%);
            --gradient-mauve: linear-gradient(135deg, #9B7E9E 0%, #FF6B6B 100%);
            
            /* Typography */
            --font-display: 'Space Grotesk', sans-serif;
            --font-body: 'Inter', -apple-system, sans-serif;
            
            /* Shadows & Glows */
            --glow-coral: 0 0 40px rgba(255, 107, 107, 0.3);
            --glow-mint: 0 0 40px rgba(78, 205, 196, 0.3);
            --shadow-deep: 0 10px 40px rgba(0, 0, 0, 0.5);
            --shadow-card: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: var(--font-body);
            background: var(--gradient-dark);
            color: var(--fyf-cream);
            line-height: 1.6;
            cursor: grab;
        }

        body.dragging {
            cursor: grabbing;
        }
        
        /* Navigation Indicators */
        .nav-helper {
            position: fixed;
            top: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1rem 2rem;
            z-index: 1000;
            font-family: var(--font-display);
            font-size: 0.9rem;
            text-align: center;
            transition: opacity 0.3s;
        }

        .nav-helper span {
            color: var(--fyf-mint);
            font-weight: 700;
        }

        /* Card Backdrop Overlay */
        .card-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 9998;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .card-backdrop.active {
            opacity: 1;
            pointer-events: all;
        }

        /* Guide Input */
        .guide-input-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            width: 90%;
            max-width: 600px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease-out;
        }

        .guide-input-container.visible {
            opacity: 1;
            pointer-events: all;
        }

        .guide-input-wrapper {
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            border: 2px solid var(--fyf-coral);
            border-radius: 50px;
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: var(--glow-coral);
            transition: all 0.3s;
        }

        .guide-input-wrapper:focus-within {
            border-color: var(--fyf-mint);
            box-shadow: var(--glow-mint);
        }

        .guide-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .guide-input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: var(--fyf-cream);
            font-family: var(--font-body);
            font-size: 1rem;
            padding: 0.5rem 0;
        }

        .guide-input::placeholder {
            color: var(--fyf-steel);
        }

        .guide-send-btn {
            background: var(--fyf-coral);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--fyf-noir);
            font-size: 1.2rem;
        }

        .guide-send-btn:hover {
            background: var(--fyf-mint);
            transform: scale(1.1);
        }
        
        /* Grid Container with padding constraints */
        .grid-container {
            position: relative;
            width: 400vw;
            height: 400vh;
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            grid-template-rows: auto;
            gap: 3rem;
            padding: 20vh 30vw;
            transform: translate(-200vw, -200vh) scale(0.35);
            transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-sizing: border-box;
            justify-items: center;
        }

        /* Varied Grid Sizes - optimiert f√ºr Laptop (16:9 Ratio) */
        .feed-card.size-small {
            grid-column: span 3;
            min-height: 280px;
            max-width: 450px;
        }

        .feed-card.size-medium {
            grid-column: span 4;
            min-height: 320px;
            max-width: 600px;
        }

        .feed-card.size-large {
            grid-column: span 6;
            min-height: 350px;
            max-width: 850px;
        }

        .feed-card.size-wide {
            grid-column: span 8;
            min-height: 280px;
            max-width: 1100px;
        }

        .feed-card.size-full {
            grid-column: span 12;
            min-height: 300px;
            max-width: 1400px;
        }

        .grid-container.zoomed-in {
            transform: translate(-200vw, -200vh) scale(1);
        }
        
        .grid-container.navigate-mode {
            transition: transform 0.3s ease-out;
        }
        
        /* Feed Cards */
        .feed-card {
            background: rgba(15, 15, 15, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease-out;
            opacity: 0.6;
            transform: scale(0.95);
            position: relative;
            max-width: 100%;
            width: 100%;
        }

        .feed-card:hover {
            opacity: 1;
            transform: scale(1);
            border-color: var(--fyf-coral);
            box-shadow: 0 8px 32px rgba(255, 107, 107, 0.3);
            z-index: 10;
        }

        .feed-card.focused {
            opacity: 1;
            transform: scale(1.05);
            border-color: var(--fyf-mint);
            box-shadow: 0 8px 32px rgba(78, 205, 196, 0.3);
            z-index: 20;
        }

        /* Expanded Card State */
        .feed-card.expanded {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) scale(1.2) !important;
            z-index: 9999 !important;
            opacity: 1 !important;
            max-width: 800px !important;
            width: 90vw !important;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8) !important;
            border-color: var(--fyf-mint) !important;
        }

        /* Disable grid interactions when card is expanded */
        body.card-expanded .grid-container {
            pointer-events: none;
        }

        body.card-expanded .feed-card:not(.expanded) {
            opacity: 0.3 !important;
        }
        
        /* Card Content */
        .card-content {
            padding: 0;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            box-sizing: border-box;
            max-width: 100%;
            overflow: hidden;
        }

        /* Text Content Wrapper */
        .text-content {
            padding: 1.5rem;
        }

        /* Ensure text doesn't overflow */
        .card-content * {
            max-width: 100%;
            word-wrap: break-word;
        }
        
        /* Article Cards with hero images */
        .card-article .hero-image {
            width: 100%;
            height: 240px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .card-article.size-large .hero-image {
            height: 320px;
        }

        .card-article .hero-image::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60%;
            background: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.7));
        }

        .card-article .article-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .card-article .favicon {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            background: var(--fyf-coral);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            color: white;
            font-weight: 700;
        }
        
        .card-article .domain {
            font-size: 0.8rem;
            color: var(--fyf-coral);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .card-article .title {
            font-family: var(--font-display);
            font-size: 1.3rem;
            font-weight: 700;
            line-height: 1.2;
            letter-spacing: -0.02em;
            color: #FFFFFF;
            margin-bottom: 0.75rem;
        }

        .card-article .excerpt {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .card-article .read-time {
            font-size: 0.75rem;
            color: var(--fyf-coral);
            background: rgba(255, 107, 107, 0.1);
            padding: 0.3rem 0.6rem;
            border-radius: 20px;
            display: inline-block;
        }
        
        /* Quote Cards */
        .card-quote {
            background: var(--gradient-mauve) !important;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 300px;
        }

        .card-quote .card-content {
            padding: 3rem 2rem;
        }

        .card-quote .quote-text {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 500;
            font-style: italic;
            line-height: 1.3;
            color: #FFFFFF;
            text-align: center;
            margin-bottom: 1rem;
        }

        .card-quote .quote-author {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            font-style: italic;
            text-align: center;
        }
        
        /* Video Cards */
        .card-video {
            background: var(--fyf-carbon) !important;
        }

        .card-video .thumbnail {
            width: 100%;
            height: 280px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            background-size: cover;
            background-position: center;
        }

        .card-video .thumbnail::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, transparent 40%, rgba(0, 0, 0, 0.7) 100%);
        }
        
        .card-video .play-btn {
            width: 60px;
            height: 60px;
            background: rgba(255, 107, 107, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            transition: all 0.3s;
        }
        
        .card-video:hover .play-btn {
            background: var(--fyf-coral);
            transform: scale(1.1);
        }
        
        /* People Cards */
        .card-people {
            text-align: center;
        }

        .card-people .card-content {
            padding: 2rem 1.5rem;
        }

        .card-people .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--gradient-coral-mint);
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .card-people .name {
            font-family: var(--font-display);
            font-size: 1.3rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            color: #FFFFFF;
            margin-bottom: 0.5rem;
        }

        .card-people .bio {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .card-people .connect-btn {
            background: transparent;
            border: 2px solid var(--fyf-mint);
            color: var(--fyf-mint);
            padding: 0.5rem 1.2rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        /* Event Cards */
        .card-event {
            background: linear-gradient(135deg, var(--fyf-charcoal), rgba(255, 107, 107, 0.1)) !important;
            border: 2px solid var(--fyf-coral) !important;
        }

        .card-event .card-content {
            padding: 2rem 1.5rem;
        }

        .card-event .event-badge {
            display: inline-block;
            background: var(--fyf-coral);
            color: var(--fyf-noir);
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 1rem;
        }

        .card-event .event-title {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 700;
            color: #FFFFFF;
            letter-spacing: -0.02em;
            margin-bottom: 0.5rem;
        }

        .card-event .excerpt {
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.6;
        }
        
        /* Guide AI Overlay */
        .guide-overlay {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            border: 2px solid var(--fyf-coral);
            border-radius: 20px;
            padding: 1.5rem 2rem;
            max-width: 500px;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s;
        }
        
        .guide-overlay.active {
            opacity: 1;
            pointer-events: all;
            transform: translateX(-50%) translateY(-10px);
        }
        
        .guide-message {
            font-family: var(--font-display);
            font-size: 1.1rem;
            line-height: 1.5;
            margin-bottom: 1rem;
        }
        
        .guide-message strong {
            color: var(--fyf-coral);
        }
        
        .guide-actions {
            display: flex;
            gap: 1rem;
        }
        
        .guide-btn {
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .guide-accept {
            background: var(--fyf-mint);
            color: var(--fyf-noir);
        }
        
        .guide-dismiss {
            background: transparent;
            border: 1px solid var(--fyf-steel);
            color: var(--fyf-steel);
        }
        
        /* Side Panel - TICK TOCK */
        .guide-panel {
            position: fixed;
            right: -450px;
            top: 0;
            width: 450px;
            height: 100vh;
            background: linear-gradient(180deg, rgba(10, 10, 10, 0.98) 0%, rgba(29, 29, 47, 0.95) 100%);
            backdrop-filter: blur(40px);
            border-left: 1px solid rgba(255, 107, 107, 0.2);
            box-shadow: -20px 0 60px rgba(0, 0, 0, 0.6);
            transition: right 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 200;
            overflow-y: auto;
            overflow-x: hidden;
            overscroll-behavior: contain;
            display: flex;
            flex-direction: column;
        }
        
        .guide-panel.open {
            right: 0;
        }
        
        .guide-toggle {
            position: fixed;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%);
            width: 60px;
            height: 60px;
            background: var(--fyf-coral);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 201;
            box-shadow: var(--shadow-deep);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: translateY(-50%) scale(1); }
            50% { transform: translateY(-50%) scale(1.05); }
        }
        
        .guide-header {
            padding: 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.05) 0%, rgba(78, 205, 196, 0.03) 100%);
            position: sticky;
            top: 0;
            z-index: 10;
            backdrop-filter: blur(10px);
        }
        
        .guide-name {
            font-family: var(--font-display);
            font-size: 2.2rem;
            font-weight: 900;
            color: var(--fyf-coral);
            margin-bottom: 0.5rem;
            text-align: center;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            text-shadow: 0 0 20px rgba(255, 107, 107, 0.4);
        }

        /* Settings Block Styling */
        .user-settings {
            background: rgba(255, 107, 107, 0.08) !important;
            border: 1px solid rgba(255, 107, 107, 0.3) !important;
            border-radius: 12px !important;
            padding: 1.5rem !important;
            margin-bottom: 1.5rem !important;
            box-shadow: 0 0 30px rgba(255, 107, 107, 0.15), inset 0 0 0 1px rgba(255, 255, 255, 0.05) !important;
            animation: settingsEntrance 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            animation-delay: 0.2s;
            opacity: 0;
            transform: translateY(12px);
        }

        @keyframes settingsEntrance {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .settings-title {
            font-family: var(--font-display) !important;
            font-size: 0.85rem !important;
            text-transform: uppercase !important;
            color: var(--fyf-coral) !important;
            margin-bottom: 1rem !important;
            letter-spacing: 0.15em !important;
            font-weight: 700 !important;
            text-align: center !important;
        }

        .setting-item {
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
            margin-bottom: 0.75rem !important;
            padding: 0.5rem 0 !important;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05) !important;
        }

        .setting-item:last-child {
            border-bottom: none !important;
            margin-bottom: 0 !important;
        }

        .setting-label {
            color: var(--fyf-steel) !important;
            font-size: 0.9rem !important;
            font-weight: 500 !important;
        }

        .setting-value {
            font-weight: 700 !important;
            font-size: 1rem !important;
            padding: 0.25rem 0.75rem !important;
            border-radius: 6px !important;
            background: rgba(255, 255, 255, 0.05) !important;
        }

        /* Tone Toggle Redesign */
        .tone-toggle {
            display: flex !important;
            gap: 0.75rem !important;
            margin-bottom: 1.5rem !important;
        }

        .tone-option {
            flex: 1 !important;
            padding: 0.75rem 1rem !important;
            border-radius: 10px !important;
            text-align: center !important;
            font-size: 0.9rem !important;
            font-weight: 700 !important;
            cursor: pointer !important;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
            border: 2px solid transparent !important;
            position: relative !important;
            overflow: hidden !important;
        }

        .tone-option::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .tone-option:hover::before {
            width: 300px;
            height: 300px;
        }

        .tone-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .tone-option.active {
            background: var(--fyf-coral) !important;
            color: var(--fyf-noir) !important;
            border-color: var(--fyf-coral) !important;
            box-shadow: 0 0 25px rgba(255, 107, 107, 0.5), 0 4px 12px rgba(0, 0, 0, 0.3) !important;
            transform: scale(1.05);
        }

        .tone-option:not(.active) {
            background: rgba(255, 255, 255, 0.03) !important;
            color: var(--fyf-steel) !important;
            border-color: rgba(255, 255, 255, 0.1) !important;
        }

        .tone-option:focus-visible {
            outline: 3px solid var(--fyf-mint);
            outline-offset: 2px;
        }
        
        .guide-chat {
            flex: 1;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            overflow-y: auto;
        }
        
        .chat-message {
            background: rgba(255, 255, 255, 0.05);
            border-left: 3px solid var(--fyf-coral);
            border-radius: 8px;
            padding: 1rem;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        /* Controls */
        .controls {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            display: flex;
            gap: 1rem;
            z-index: 100;
        }
        
        .control-btn {
            width: 50px;
            height: 50px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid var(--fyf-mint);
            border-radius: 50%;
            color: var(--fyf-mint);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.5rem;
        }
        
        .control-btn:hover {
            background: var(--fyf-mint);
            color: var(--fyf-noir);
            transform: scale(1.1);
        }
        
        /* Focus Mode Overlay */
        .focus-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            z-index: 50;
        }
        
        .focus-mode .focus-overlay {
            display: block;
        }
        
        .focus-mode .feed-card.focused {
            z-index: 60;
            transform: scale(1.2);
        }
    </style>
</head>
<body>
    <!-- Navigation Helper -->
    <div class="nav-helper" id="navHelper">
        <span>SCROLL</span> zum Zoomen ¬∑ <span>DRAG</span> zum Navigieren ¬∑ <span>CLICK</span> Card √∂ffnen ¬∑ <span>CMD+J</span> f√ºr Guide
    </div>

    <!-- Card Backdrop -->
    <div class="card-backdrop" id="cardBackdrop"></div>

    <!-- Guide Input -->
    <div class="guide-input-container">
        <div class="guide-input-wrapper">
            <span class="guide-icon">üß≠</span>
            <input
                type="text"
                class="guide-input"
                id="guideInput"
                placeholder="Hey, heute habe ich Bock mich von xy inspirieren zu lassen..."
            />
            <button class="guide-send-btn" onclick="sendToGuide()">‚Üí</button>
        </div>
    </div>

    <!-- Grid Container -->
    <div class="grid-container" id="gridContainer">
        <!-- Mixed Size Grid Layout -->
        <div class="feed-card card-article size-medium">
            <div class="card-content">
                <div class="hero-image" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%), url('https://images.unsplash.com/photo-1501139083538-0139583c060f?w=600'); background-blend-mode: overlay; background-size: cover;"></div>
                <div class="text-content">
                    <div class="article-header">
                        <div class="favicon">M</div>
                        <span class="domain">medium.com</span>
                    </div>
                    <h3 class="title">Die Illusion der unendlichen Zeit</h3>
                    <p class="excerpt">Wir leben, als h√§tten wir ewig Zeit. Doch die Realit√§t ist brutal...</p>
                    <span class="read-time">5 Min. Lesezeit</span>
                </div>
            </div>
        </div>

        <div class="feed-card card-quote size-medium">
            <div class="card-content">
                <p class="quote-text">"Du hast zwei Leben. Das zweite beginnt, wenn du erkennst, dass du nur eines hast."</p>
                <p class="quote-author">‚Äî Konfuzius</p>
            </div>
        </div>

        <div class="feed-card card-video size-medium">
            <div class="card-content">
                <div class="thumbnail" style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.8), rgba(118, 75, 162, 0.8)), url('https://images.unsplash.com/photo-1533749871411-5e21e14bcc7d?w=600'); background-blend-mode: overlay; background-size: cover; background-position: center;">
                    <div class="play-btn">‚ñ∂</div>
                </div>
                <div class="text-content">
                    <h3 class="title">How to Actually Use Your Time</h3>
                    <p class="excerpt">Ali Abdaal ‚Ä¢ 12:34</p>
                </div>
            </div>
        </div>

        <div class="feed-card card-people size-medium">
            <div class="card-content">
                <div class="avatar">üöÄ</div>
                <h3 class="name">Sarah Chen</h3>
                <p class="bio">Digital Nomad seit 2019. Lebt ihre Vision von Freiheit.</p>
                <button class="connect-btn">Connect</button>
            </div>
        </div>

        <div class="feed-card card-event size-medium">
            <div class="card-content">
                <span class="event-badge">LIVE EVENT</span>
                <h3 class="event-title">FYF Festival 2025</h3>
                <p class="excerpt">Hamburg ¬∑ Kampnagel<br>137 Tage</p>
            </div>
        </div>

        <div class="feed-card card-article size-medium">
            <div class="card-content">
                <div class="hero-image" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%), url('https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600'); background-blend-mode: overlay; background-size: cover;"></div>
                <div class="text-content">
                    <div class="article-header">
                        <div class="favicon">W</div>
                        <span class="domain">wired.com</span>
                    </div>
                    <h3 class="title">The Attention Economy Is Eating Your Life</h3>
                    <p class="excerpt">Every notification steals your most precious resource...</p>
                    <span class="read-time">8 Min. Lesezeit</span>
                </div>
            </div>
        </div>

        <div class="feed-card card-quote size-wide">
            <div class="card-content">
                <p class="quote-text" style="font-size: 2rem;">"Zeit ist das, was verhindert, dass alles auf einmal passiert."</p>
                <p class="quote-author">‚Äî Ray Cummings</p>
            </div>
        </div>

        <div class="feed-card card-people size-medium">
            <div class="card-content">
                <div class="avatar">üí°</div>
                <h3 class="name">Marcus Weber</h3>
                <p class="bio">Gr√ºnder & Impact Investor. Baut die Zukunft.</p>
                <button class="connect-btn">Ask Marcus</button>
            </div>
        </div>

        <div class="feed-card card-article size-medium">
            <div class="card-content">
                <div class="hero-image" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%), url('https://images.unsplash.com/photo-1495364141860-b0d03eccd065?w=600'); background-blend-mode: overlay; background-size: cover;"></div>
                <div class="text-content">
                    <div class="article-header">
                        <div class="favicon">N</div>
                        <span class="domain">newyorker.com</span>
                    </div>
                    <h3 class="title">The Privilege of Time: Who Gets to Waste It?</h3>
                    <p class="excerpt">In our society, the ability to 'waste' time has become the ultimate luxury...</p>
                    <span class="read-time">12 Min. Lesezeit</span>
                </div>
            </div>
        </div>

        <div class="feed-card card-event size-medium">
            <div class="card-content">
                <span class="event-badge">WORKSHOP</span>
                <h3 class="event-title">Zeit-Audit Masterclass</h3>
                <p class="excerpt">Online ¬∑ Zoom<br>42 Tage</p>
            </div>
        </div>

        <div class="feed-card card-video size-medium">
            <div class="card-content">
                <div class="thumbnail" style="background: linear-gradient(135deg, rgba(250, 112, 154, 0.8), rgba(254, 225, 64, 0.8)), url('https://images.unsplash.com/photo-1509228468518-180dd4864904?w=600'); background-blend-mode: overlay; background-size: cover; background-position: center;">
                    <div class="play-btn">‚ñ∂</div>
                </div>
                <div class="text-content">
                    <h3 class="title">Why You're Always Running Out of Time</h3>
                    <p class="excerpt">Kurzgesagt ‚Ä¢ 9:21</p>
                </div>
            </div>
        </div>

        <div class="feed-card card-quote size-small">
            <div class="card-content">
                <p class="quote-text">"Wir m√ºssen die Zeit als Werkzeug benutzen, nicht als Sofa."</p>
                <p class="quote-author">‚Äî JFK</p>
            </div>
        </div>

        <div class="feed-card card-people size-small">
            <div class="card-content">
                <div class="avatar">üé®</div>
                <h3 class="name">Luna Petrova</h3>
                <p class="bio">K√ºnstlerin & Zeit-Philosophin</p>
                <button class="connect-btn">Connect</button>
            </div>
        </div>

        <div class="feed-card card-article size-medium">
            <div class="card-content">
                <div class="hero-image" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%), url('https://images.unsplash.com/photo-1490730141103-6cac27aaab94?w=600'); background-blend-mode: overlay; background-size: cover;"></div>
                <div class="text-content">
                    <div class="article-header">
                        <div class="favicon">A</div>
                        <span class="domain">aeon.co</span>
                    </div>
                    <h3 class="title">The Tyranny of the Clock</h3>
                    <p class="excerpt">From sundials to smartphones, we've created a prison of perpetual urgency...</p>
                    <span class="read-time">15 Min. Lesezeit</span>
                </div>
            </div>
        </div>

        <div class="feed-card card-event size-wide">
            <div class="card-content">
                <span class="event-badge">RETREAT</span>
                <h3 class="event-title">48h Digital Detox</h3>
                <p class="excerpt">Schwarzwald ¬∑ Wald & Berge<br>89 Tage</p>
            </div>
        </div>

        <div class="feed-card card-quote size-small">
            <div class="card-content">
                <p class="quote-text">"The bad news is time flies. The good news is you're the pilot."</p>
                <p class="quote-author">‚Äî Altshuler</p>
            </div>
        </div>

        <div class="feed-card card-article size-small">
            <div class="card-content">
                <div class="hero-image" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%), url('https://images.unsplash.com/photo-1504868584819-f8e8b4b6d7e3?w=600'); background-blend-mode: overlay; background-size: cover;"></div>
                <div class="text-content">
                    <div class="article-header">
                        <div class="favicon">T</div>
                        <span class="domain">time.com</span>
                    </div>
                    <h3 class="title">The Rise of Time Poverty</h3>
                    <p class="excerpt">Despite all our time-saving technology...</p>
                    <span class="read-time">7 Min. Lesezeit</span>
                </div>
            </div>
        </div>

        <div class="feed-card card-video size-medium">
            <div class="card-content">
                <div class="thumbnail" style="background: linear-gradient(135deg, rgba(48, 207, 208, 0.8), rgba(51, 8, 103, 0.8)), url('https://images.unsplash.com/photo-1523961131990-5ea7c61b2107?w=600'); background-blend-mode: overlay; background-size: cover; background-position: center;">
                    <div class="play-btn">‚ñ∂</div>
                </div>
                <div class="text-content">
                    <h3 class="title">Stop Wasting Your 20s</h3>
                    <p class="excerpt">Hamza ‚Ä¢ 18:42</p>
                </div>
            </div>
        </div>

        <div class="feed-card card-people size-small">
            <div class="card-content">
                <div class="avatar">üåü</div>
                <h3 class="name">Nina Richter</h3>
                <p class="bio">Creative Direction</p>
                <button class="connect-btn">Connect</button>
            </div>
        </div>

        <div class="feed-card card-article size-large">
            <div class="card-content">
                <div class="hero-image" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%), url('https://images.unsplash.com/photo-1494783367193-149034c05e8f?w=800'); background-blend-mode: overlay; background-size: cover;"></div>
                <div class="text-content">
                    <div class="article-header">
                        <div class="favicon">F</div>
                        <span class="domain">fastcompany.com</span>
                    </div>
                    <h3 class="title">Why Hustle Culture Is Killing You</h3>
                    <p class="excerpt">The toxic truth about productivity obsession and why the cult of busy is destroying our mental health, relationships, and actual output...</p>
                    <span class="read-time">6 Min. Lesezeit</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Guide AI Overlay -->
    <div class="guide-overlay" id="guideOverlay">
        <div class="guide-message">
            <strong>TICK TOCK!</strong> Du scrollst seit 5 Minuten ziellos herum. 
            Sarah Chen's Story k√∂nnte dein Leben √§ndern. Fokussieren?
        </div>
        <div class="guide-actions">
            <button class="guide-btn guide-accept" onclick="focusCard()">Zeig mir</button>
            <button class="guide-btn guide-dismiss" onclick="dismissGuide()">Sp√§ter</button>
        </div>
    </div>

    <!-- Side Panel -->
    <aside class="guide-panel" id="guidePanel" role="complementary" aria-label="Tick Tock Guide">
        <div class="guide-header">
            <h2 class="guide-name">TICK TOCK</h2>
            <p class="guide-tagline" style="color: var(--fyf-steel); font-size: 0.9rem; text-align: center; margin-bottom: 1rem;">
                Deine Zeit l√§uft. Ich z√§hle mit.
            </p>

            <!-- User Settings Display -->
            <div class="user-settings" id="userSettings" aria-labelledby="settingsTitle">
                <div class="settings-title" id="settingsTitle">Deine Einstellungen</div>
                <div class="setting-item" style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;">
                    <span class="setting-label" style="color: var(--fyf-steel);">Ziel:</span>
                    <span class="setting-value" style="color: var(--fyf-cream); font-weight: 600;">Freiheit mit 45</span>
                </div>
                <div class="setting-item" style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;">
                    <span class="setting-label" style="color: var(--fyf-steel);">Fokus:</span>
                    <span class="setting-value" style="color: var(--fyf-mint); font-weight: 600;">Zeit > Geld</span>
                </div>
                <div class="setting-item" style="display: flex; justify-content: space-between;">
                    <span class="setting-label" style="color: var(--fyf-steel);">Risiko:</span>
                    <span class="setting-value" style="color: var(--fyf-coral); font-weight: 600;">Mutig</span>
                </div>
            </div>

            <!-- Ton-Kalibrierung -->
            <div class="tone-toggle" role="group" aria-label="Ton-Einstellungen">
                <div class="tone-option active" onclick="toggleTone(this, 'straight')" tabindex="0" role="button" aria-pressed="true">
                    üî• Straight Talk
                </div>
                <div class="tone-option" onclick="toggleTone(this, 'soft')" tabindex="0" role="button" aria-pressed="false">
                    ü§ó Soft Touch
                </div>
            </div>
        </div>

        <div class="guide-chat" id="guideChat">
            <div class="chat-message">
                <p><strong>TICK TOCK!</strong> Du hast heute schon 3 Stunden gescrollt.
                Das sind 180 Minuten deines einzigen Lebens. Wake the fuck up.</p>
            </div>
            <div class="chat-message">
                <p>Dein Zeit-Score heute: <strong style="color: var(--fyf-coral);">23%</strong><br>
                77% verschwendet. Das geht besser. Viel besser.</p>
            </div>
            <div class="chat-message">
                <p>Sarah Chen hat gemacht, wovon du nur tr√§umst.
                Connect mit ihr oder scroll weiter ins Nichts.</p>
            </div>
        </div>

        <button class="shut-up-btn" onclick="shutUp()" style="width: calc(100% - 3rem); margin: 1rem 1.5rem; padding: 0.75rem; background: rgba(255, 107, 107, 0.1); border: 1px solid var(--fyf-coral); color: var(--fyf-coral); border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s;">
            HALT DIE FRESSE
        </button>

        <div class="chat-input-wrapper" style="padding: 1rem 1.5rem; border-top: 1px solid rgba(255, 255, 255, 0.05);">
            <div class="chat-input" style="display: flex; gap: 0.5rem; align-items: center; background: rgba(255, 255, 255, 0.05); border-radius: 8px; padding: 0.5rem;">
                <input type="text" placeholder="Frag mich was..." id="chatInput" style="flex: 1; background: transparent; border: none; outline: none; color: var(--fyf-cream); padding: 0.5rem;">
                <button class="chat-send" onclick="sendChatMessage()" style="width: 40px; height: 40px; background: var(--fyf-coral); border: none; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s;">
                    <span style="color: var(--fyf-noir); font-size: 1.5rem;">‚Üí</span>
                </button>
            </div>
        </div>
    </aside>

    <!-- Guide Toggle Button -->
    <div class="guide-toggle" id="guideToggle" onclick="toggleGuide()">
        <span style="font-size: 1.8rem;">‚è∞</span>
    </div>

    <!-- Controls -->
    <div class="controls">
        <button class="control-btn" onclick="resetView()" title="Reset View">‚ü≤</button>
        <button class="control-btn" onclick="toggleZoom()" title="Toggle Zoom">üîç</button>
    </div>

    <!-- Focus Overlay -->
    <div class="focus-overlay"></div>

    <script>
        const container = document.getElementById('gridContainer');
        const navHelper = document.getElementById('navHelper');
        const guideOverlay = document.getElementById('guideOverlay');
        const cardBackdrop = document.getElementById('cardBackdrop');
        const cards = document.querySelectorAll('.feed-card');

        let isZoomedIn = false;
        let focusedCard = null;
        let scrollTimeout;
        let guideTimeout;
        let isCardLocked = false;
        let lockedCard = null;
        let expandedCard = null;

        // Google Maps style dragging
        let isDragging = false;
        let startX = 0;
        let startY = 0;
        let translateX = -200;
        let translateY = -200;
        let currentTranslateX = -200;
        let currentTranslateY = -200;

        // Mouse down - start dragging
        document.addEventListener('mousedown', (e) => {
            // Don't drag if clicking on cards or UI elements
            if (e.target.closest('.feed-card') || e.target.closest('.guide-input-container') ||
                e.target.closest('.guide-panel') || e.target.closest('.guide-toggle') ||
                e.target.closest('.controls') || e.target.closest('.nav-helper')) {
                return;
            }

            isDragging = true;
            startX = e.clientX;
            startY = e.clientY;
            document.body.style.cursor = 'grabbing';
            container.style.transition = 'none';
        });

        // Mouse move - drag
        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;

            // Adaptive drag speed based on zoom level - slower when zoomed in
            const speedMultiplier = scrollAmount > 0.8 ? 0.015 : 0.03;
            const deltaX = (e.clientX - startX) * speedMultiplier;
            const deltaY = (e.clientY - startY) * speedMultiplier;

            currentTranslateX = translateX + deltaX;
            currentTranslateY = translateY + deltaY;

            // Boundaries - angepasst an neue Dimensionen
            const maxOffset = 80;
            currentTranslateX = Math.max(-200 - maxOffset, Math.min(-200 + maxOffset, currentTranslateX));
            currentTranslateY = Math.max(-200 - maxOffset, Math.min(-200 + maxOffset, currentTranslateY));

            container.style.transform = `translate(${currentTranslateX}vw, ${currentTranslateY}vh) scale(${scrollAmount})`;
        });

        // Mouse up - stop dragging
        document.addEventListener('mouseup', () => {
            if (isDragging) {
                isDragging = false;
                translateX = currentTranslateX;
                translateY = currentTranslateY;
                document.body.style.cursor = 'crosshair';
                container.style.transition = 'transform 0.3s ease-out';
            }
        });

        // Card hover effects - NO LOCKING (f√ºr Pr√§sentation)
        cards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                if (scrollAmount > 0.7) {
                    this.style.transform = 'scale(1)';
                    this.style.opacity = '1';
                    this.style.borderColor = 'var(--fyf-coral)';
                    this.style.boxShadow = 'var(--glow-coral)';
                }
            });

            card.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(0.95)';
                this.style.opacity = '0.6';
                this.style.borderColor = 'rgba(255, 255, 255, 0.05)';
                this.style.boxShadow = 'none';
            });
        });

        // Scroll to zoom (Google Maps style - zoom to cursor position)
        let scrollAmount = 0.35;
        document.addEventListener('wheel', (e) => {
            e.preventDefault();

            clearTimeout(scrollTimeout);
            navHelper.style.opacity = '0';

            const oldScale = scrollAmount;

            // Kleinere Zoom-Schritte f√ºr pr√§zisere Kontrolle
            if (e.deltaY < 0) {
                scrollAmount = Math.max(0.35, scrollAmount - 0.05);
            } else {
                scrollAmount = Math.min(1.0, scrollAmount + 0.05); // Max 1.0 - safe zone
            }

            // Zoom towards cursor position (like Google Maps)
            const rect = container.getBoundingClientRect();
            const cursorX = e.clientX - rect.left;
            const cursorY = e.clientY - rect.top;

            const scaleChange = scrollAmount / oldScale;

            currentTranslateX = currentTranslateX - (cursorX * (scaleChange - 1) / window.innerWidth * 100);
            currentTranslateY = currentTranslateY - (cursorY * (scaleChange - 1) / window.innerHeight * 100);

            translateX = currentTranslateX;
            translateY = currentTranslateY;

            container.style.transform = `translate(${currentTranslateX}vw, ${currentTranslateY}vh) scale(${scrollAmount})`;

            isZoomedIn = scrollAmount >= 0.8;

            if (isZoomedIn) {
                container.classList.add('zoomed-in');
                container.classList.add('navigate-mode');
                showGuideHint();
            } else {
                container.classList.remove('zoomed-in');
                container.classList.remove('navigate-mode');
            }

            scrollTimeout = setTimeout(() => {
                navHelper.style.opacity = '1';
            }, 2000);
        });
        
        // Card interactions - fixed to prevent zoom chaos
        cards.forEach((card, index) => {
            card.addEventListener('click', function(e) {
                e.stopPropagation();

                // If card is already expanded, do nothing (let user read)
                if (expandedCard === this) {
                    return;
                }

                // Expand the card as modal overlay
                expandCard(this);
            });

            card.addEventListener('mouseenter', function() {
                if (!expandedCard && !focusedCard) {
                    this.style.zIndex = '30';
                }
            });

            card.addEventListener('mouseleave', function() {
                if (!expandedCard && !focusedCard) {
                    this.style.zIndex = '';
                }
            });
        });

        // Expand card function
        function expandCard(card) {
            expandedCard = card;
            card.classList.add('expanded');
            cardBackdrop.classList.add('active');
            document.body.classList.add('card-expanded');
        }

        // Close expanded card function
        function closeExpandedCard() {
            if (expandedCard) {
                expandedCard.classList.remove('expanded');
                cardBackdrop.classList.remove('active');
                document.body.classList.remove('card-expanded');
                expandedCard = null;
            }
        }

        // Close on backdrop click
        cardBackdrop.addEventListener('click', closeExpandedCard);
        
        // Guide AI hints
        function showGuideHint() {
            clearTimeout(guideTimeout);
            guideTimeout = setTimeout(() => {
                if (isZoomedIn && !focusedCard) {
                    guideOverlay.classList.add('active');
                    
                    setTimeout(() => {
                        guideOverlay.classList.remove('active');
                    }, 5000);
                }
            }, 3000);
        }
        
        // Guide functions
        function toggleGuide() {
            const panel = document.getElementById('guidePanel');
            panel.classList.toggle('open');

            // Add guide message
            const chat = document.getElementById('guideChat');
            const newMessage = document.createElement('div');
            newMessage.className = 'chat-message';
            newMessage.innerHTML = `<p><strong>Guide ${panel.classList.contains('open') ? 'aktiviert' : 'deaktiviert'}!</strong><br>
                ${panel.classList.contains('open') ? 'Ich helfe dir, den √úberblick zu behalten.' : 'Du bist auf dich allein gestellt.'}</p>`;
            chat.appendChild(newMessage);
            chat.scrollTop = chat.scrollHeight;
        }

        // Ton Toggle Function
        function toggleTone(element, tone) {
            document.querySelectorAll('.tone-option').forEach(opt => {
                opt.classList.remove('active');
                opt.setAttribute('aria-pressed', 'false');
            });
            element.classList.add('active');
            element.setAttribute('aria-pressed', 'true');

            const chat = document.getElementById('guideChat');
            const message = document.createElement('div');
            message.className = 'chat-message';

            if (tone === 'straight') {
                message.innerHTML = `<p><strong>Straight Talk aktiviert.</strong><br>
                Alright, ich sag's dir wie es ist. Keine Kuschel-Schei√üe mehr.</p>`;
            } else {
                message.innerHTML = `<p><strong>Soft Touch aktiviert.</strong><br>
                Okay, ich bin jetzt etwas sanfter zu dir. Aber die Wahrheit bleibt die gleiche.</p>`;
            }

            chat.appendChild(message);
            chat.scrollTop = chat.scrollHeight;
        }

        // Shut Up Function
        function shutUp() {
            const chat = document.getElementById('guideChat');
            const message = document.createElement('div');
            message.className = 'chat-message';
            message.innerHTML = `<p><strong>üò∂ Okay, okay...</strong><br>
            Ich bin still. F√ºr jetzt. Aber ich beobachte dich weiter.</p>`;
            chat.appendChild(message);
            chat.scrollTop = chat.scrollHeight;

            // Disable guide messages for 10 minutes
            setTimeout(() => {
                const returnMessage = document.createElement('div');
                returnMessage.className = 'chat-message';
                returnMessage.innerHTML = `<p><strong>TICK TOCK!</strong><br>
                10 Minuten sind um. Ich bin zur√ºck. Hast du sie sinnvoll genutzt?</p>`;
                chat.appendChild(returnMessage);
                chat.scrollTop = chat.scrollHeight;
            }, 600000); // 10 minutes
        }

        // Send Chat Message
        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();

            if (!message) return;

            const chat = document.getElementById('guideChat');

            // User message
            const userMessage = document.createElement('div');
            userMessage.className = 'chat-message';
            userMessage.style.borderLeftColor = 'var(--fyf-mint)';
            userMessage.innerHTML = `<p><strong>Du:</strong><br>${message}</p>`;
            chat.appendChild(userMessage);

            // Simulate AI response
            setTimeout(() => {
                const responses = [
                    "Interessante Frage. Lass mich dr√ºber nachdenken...",
                    "Gute Frage! Schau dir mal Sarah Chens Story an - sie hat genau das durchgemacht.",
                    "Die Antwort ist einfach: H√∂r auf zu warten und fang an zu leben.",
                    "Das ist die richtige Frage. Aber bist du bereit f√ºr die Antwort?",
                    "Zeit l√§uft. W√§hrend du fragst, vergehen Sekunden. Handle!"
                ];

                const response = responses[Math.floor(Math.random() * responses.length)];
                const aiMessage = document.createElement('div');
                aiMessage.className = 'chat-message';
                aiMessage.innerHTML = `<p><strong>TICK TOCK:</strong><br>${response}</p>`;
                chat.appendChild(aiMessage);
                chat.scrollTop = chat.scrollHeight;
            }, 1000);

            input.value = '';
        }

        // Enter key for chat
        document.addEventListener('DOMContentLoaded', () => {
            const chatInput = document.getElementById('chatInput');
            if (chatInput) {
                chatInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        sendChatMessage();
                    }
                });
            }

            // Set focus on Settings block when sidebar opens
            const guidePanel = document.getElementById('guidePanel');
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.attributeName === 'class') {
                        if (guidePanel.classList.contains('open')) {
                            // Focus on first interactive element in settings
                            setTimeout(() => {
                                const firstToneOption = document.querySelector('.tone-option');
                                if (firstToneOption) {
                                    // Make it focusable
                                    firstToneOption.setAttribute('tabindex', '0');
                                    firstToneOption.focus();

                                    // Scroll settings into view
                                    const userSettings = document.querySelector('.user-settings');
                                    if (userSettings) {
                                        userSettings.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                    }
                                }
                            }, 400); // Wait for sidebar animation
                        }
                    }
                });
            });

            observer.observe(guidePanel, { attributes: true });

            // Make tone options keyboard accessible
            document.querySelectorAll('.tone-option').forEach((option, index) => {
                option.setAttribute('tabindex', '0');
                option.setAttribute('role', 'button');
                option.setAttribute('aria-pressed', option.classList.contains('active') ? 'true' : 'false');

                // Keyboard support
                option.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        option.click();
                    }
                });
            });
        });

        // AI Guide Intelligence - Keyword matching and content filtering
        const guideKnowledge = {
            keywords: {
                'inspiration': ['artikel', 'quote', 'people'],
                'philosophie': ['artikel', 'quote'],
                'zeit': ['artikel', 'quote', 'video'],
                'people': ['people'],
                'menschen': ['people'],
                'leute': ['people'],
                'person': ['people'],
                'event': ['event'],
                'workshop': ['event'],
                'videos': ['video'],
                'lesen': ['artikel'],
                'artikel': ['artikel'],
                'motivation': ['quote', 'video', 'people'],
                'produktivit√§t': ['artikel', 'video'],
                'freiheit': ['people', 'quote', 'artikel'],
                'digital nomad': ['people'],
                'detox': ['event'],
                'lernen': ['artikel', 'video']
            },

            responses: [
                "Verstanden! Ich filtere deinen Feed jetzt basierend auf deinem Input.",
                "Alright! Lass mich dir zeigen, was zu deinem Mindset passt.",
                "Ich hab's. Ich zeige dir die relevanten Inhalte.",
                "Got it! Ich kuratiere deinen Feed neu - check die highlighted Cards.",
                "Perfekt! Deine Zeit ist wertvoll - ich zeige dir nur was z√§hlt."
            ]
        };

        // Send message to guide
        function sendToGuide() {
            const input = document.getElementById('guideInput');
            const message = input.value.trim().toLowerCase();

            if (!message) return;

            // Hide input
            document.querySelector('.guide-input-container').classList.remove('visible');

            // Open guide panel if not open
            const panel = document.getElementById('guidePanel');
            if (!panel.classList.contains('open')) {
                panel.classList.add('open');
            }

            // Add user message to chat
            const chat = document.getElementById('guideChat');
            const userMessage = document.createElement('div');
            userMessage.className = 'chat-message';
            userMessage.style.borderLeftColor = 'var(--fyf-mint)';
            userMessage.innerHTML = `<p><strong>Du:</strong><br>${input.value}</p>`;
            chat.appendChild(userMessage);

            // Analyze message and respond
            setTimeout(() => {
                const analysis = analyzeUserIntent(message);
                const guideResponse = document.createElement('div');
                guideResponse.className = 'chat-message';
                guideResponse.innerHTML = `<p><strong>TICK TOCK:</strong><br>
                    ${analysis.response}</p>`;
                chat.appendChild(guideResponse);
                chat.scrollTop = chat.scrollHeight;

                // Filter cards based on AI analysis
                filterCardsByIntent(analysis.cardTypes);
            }, 800);

            // Clear input
            input.value = '';
            chat.scrollTop = chat.scrollHeight;
        }

        // AI: Analyze user intent from message
        function analyzeUserIntent(message) {
            const detectedTypes = new Set();

            // Check for keywords in message
            for (const [keyword, types] of Object.entries(guideKnowledge.keywords)) {
                if (message.includes(keyword)) {
                    types.forEach(type => detectedTypes.add(type));
                }
            }

            // If no keywords detected, show random mix
            if (detectedTypes.size === 0) {
                detectedTypes.add('artikel');
                detectedTypes.add('quote');
            }

            // Random response
            const response = guideKnowledge.responses[
                Math.floor(Math.random() * guideKnowledge.responses.length)
            ];

            return {
                cardTypes: Array.from(detectedTypes),
                response: response
            };
        }

        // AI: Filter and highlight relevant cards
        function filterCardsByIntent(cardTypes) {
            // First, fade all cards
            cards.forEach(card => {
                card.style.opacity = '0.2';
                card.style.transform = 'scale(0.95)';
                card.style.borderColor = 'rgba(255, 255, 255, 0.05)';
                card.style.boxShadow = 'none';
            });

            // Find matching cards
            const relevantCards = [];
            cards.forEach(card => {
                for (const type of cardTypes) {
                    if (card.classList.contains(`card-${type}`)) {
                        relevantCards.push(card);
                        break;
                    }
                }
            });

            // Highlight relevant cards with stagger animation
            relevantCards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'scale(1)';
                    card.style.borderColor = 'var(--fyf-coral)';
                    card.style.boxShadow = 'var(--glow-coral)';

                    // Zoom to first highlighted card smoothly (safe zoom level)
                    if (index === 0 && scrollAmount < 0.8) {
                        scrollAmount = 0.85;
                        isZoomedIn = true;
                        container.classList.add('zoomed-in', 'navigate-mode');

                        // Center on the card
                        const rect = card.getBoundingClientRect();
                        const viewportCenterX = window.innerWidth / 2;
                        const viewportCenterY = window.innerHeight / 2;
                        const cardCenterX = rect.left + rect.width / 2;
                        const cardCenterY = rect.top + rect.height / 2;

                        const offsetX = (viewportCenterX - cardCenterX) / window.innerWidth;
                        const offsetY = (viewportCenterY - cardCenterY) / window.innerHeight;

                        currentTranslateX = -200 + (offsetX * 15);
                        currentTranslateY = -200 + (offsetY * 15);
                        translateX = currentTranslateX;
                        translateY = currentTranslateY;

                        container.style.transition = 'transform 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                        container.style.transform = `translate(${currentTranslateX}vw, ${currentTranslateY}vh) scale(${scrollAmount})`;

                        setTimeout(() => {
                            container.style.transition = 'transform 0.3s ease-out';
                        }, 1200);
                    }
                }, index * 150);
            });

            // Add reset button message
            setTimeout(() => {
                const chat = document.getElementById('guideChat');
                const resetMsg = document.createElement('div');
                resetMsg.className = 'chat-message';
                resetMsg.innerHTML = `<p>Zeige ${relevantCards.length} relevante Cards.
                    <span style="color: var(--fyf-mint); cursor: pointer;" onclick="resetCardFilter()">
                        [Filter zur√ºcksetzen]
                    </span></p>`;
                chat.appendChild(resetMsg);
                chat.scrollTop = chat.scrollHeight;
            }, relevantCards.length * 150 + 500);
        }

        // Reset card filter
        function resetCardFilter() {
            cards.forEach(card => {
                card.style.opacity = '0.6';
                card.style.transform = 'scale(0.95)';
                card.style.borderColor = 'rgba(255, 255, 255, 0.05)';
                card.style.boxShadow = 'none';
            });

            const chat = document.getElementById('guideChat');
            const resetMsg = document.createElement('div');
            resetMsg.className = 'chat-message';
            resetMsg.innerHTML = `<p><strong>TICK TOCK:</strong><br>Filter zur√ºckgesetzt. Alle Cards wieder sichtbar.</p>`;
            chat.appendChild(resetMsg);
            chat.scrollTop = chat.scrollHeight;
        }

        // Toggle input with Cmd+J (like Notion)
        document.addEventListener('keydown', (e) => {
            if ((e.metaKey || e.ctrlKey) && e.key === 'j') {
                e.preventDefault();
                const container = document.querySelector('.guide-input-container');
                container.classList.toggle('visible');

                if (container.classList.contains('visible')) {
                    document.getElementById('guideInput').focus();
                }
            }
        });

        // Enter key to send
        document.addEventListener('DOMContentLoaded', () => {
            const input = document.getElementById('guideInput');
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendToGuide();
                }
            });
        });
        
        function focusCard() {
            // Find and focus Sarah Chen card
            const sarahCard = Array.from(cards).find(card => 
                card.textContent.includes('Sarah Chen')
            );
            if (sarahCard) {
                sarahCard.click();
            }
            dismissGuide();
        }
        
        function dismissGuide() {
            guideOverlay.classList.remove('active');
        }
        
        function resetView() {
            scrollAmount = 0.35;
            translateX = -200;
            translateY = -200;
            currentTranslateX = -200;
            currentTranslateY = -200;
            container.style.transform = 'translate(-200vw, -200vh) scale(0.35)';
            container.classList.remove('zoomed-in', 'navigate-mode');
            cards.forEach(c => {
                c.classList.remove('focused');
                c.style.opacity = '0.6';
                c.style.transform = 'scale(0.95)';
                c.style.borderColor = 'rgba(255, 255, 255, 0.05)';
                c.style.boxShadow = 'none';
            });
            focusedCard = null;
            isZoomedIn = false;
        }

        function toggleZoom() {
            if (isZoomedIn) {
                resetView();
            } else {
                scrollAmount = 0.9;
                container.style.transform = 'translate(-200vw, -200vh) scale(0.9)';
                container.classList.add('zoomed-in', 'navigate-mode');
                isZoomedIn = true;
                showGuideHint();
            }
        }
        
        function openCardDetail(card) {
            document.body.classList.add('focus-mode');
            // Here would be the detail view logic
        }
        
        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                // First priority: close expanded card
                if (expandedCard) {
                    closeExpandedCard();
                } else {
                    // Otherwise reset view
                    resetView();
                    document.body.classList.remove('focus-mode');
                }
            }
            if (e.key === 'g') {
                toggleGuide();
            }
        });
    </script>
</body>
</html>