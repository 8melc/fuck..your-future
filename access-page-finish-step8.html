<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FYF Onboarding – Abschluss</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --fyf-noir: #1a1a1a;
            --fyf-steel: #7d8c8b;
            --fyf-cream: #f7fbfa;
            --fyf-mint: #00b7b7;
            --fyf-coral: #ff6b6b;
            --fyf-coral-hover: #ff7f7f;
            --card-bg: #262626;
            --card-border: rgba(255, 255, 255, 0.08);
            --time-panel-bg: #232323;
            --radius-md: 12px;
            --font-display: 'Space Grotesk', sans-serif;
            --font-body: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            --shadow-card: 0 8px 24px rgba(0, 0, 0, 0.35);
        }

        *, *::before, *::after {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: var(--font-body);
            background: var(--fyf-noir);
            color: var(--fyf-cream);
            min-height: 100vh;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        a {
            color: inherit;
        }

        .completion-page {
            position: relative;
            padding: 32px 20px;
            max-width: 640px;
            margin: 0 auto;
        }


        header.progress-shell {
            display: flex;
            flex-direction: column;
            gap: 12px;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: var(--radius-md);
            padding: 18px 24px;
            margin-bottom: 32px;
            box-shadow: var(--shadow-card);
        }

        .progress-bar {
            position: relative;
            height: 8px;
            width: 100%;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 999px;
            overflow: hidden;
        }

        .progress-bar .progress-fill {
            position: absolute;
            inset: 0;
            background: linear-gradient(120deg, var(--fyf-coral), var(--fyf-mint));
            width: 100%;
            transform-origin: left;
            animation: progressFill 1.1s ease forwards 0.3s;
        }

        .progress-meta {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            font-family: var(--font-body);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: rgba(255, 255, 255, 0.72);
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            margin: -1px;
            clip: rect(0, 0, 0, 0);
            overflow: hidden;
        }

        .completion-content {
            display: flex;
            flex-direction: column;
            gap: 32px;
        }

        section {
            position: relative;
        }

        .hero {
            position: relative;
            text-align: center;
            padding: 32px;
            border-radius: var(--radius-md);
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow-card);
            animation: fadeUp 0.22s ease;
        }

        .hero::before {
            content: "";
            position: absolute;
            top: 32px;
            left: 32px;
            width: 1px;
            height: 60px;
            background: var(--fyf-mint);
            border-radius: 999px;
        }

        .hero-title {
            font-family: var(--font-display);
            font-size: 2.25rem;
            font-weight: 700;
            color: var(--fyf-mint);
            letter-spacing: -0.02em;
            margin: 0 0 16px;
            text-shadow: 0 0 16px rgba(0, 183, 183, 0.3);
        }

        .step-title {
            color: var(--fyf-mint);
        }

        .hero-subline {
            font-family: var(--font-body);
            font-size: 1.1rem;
            margin: 0;
            color: rgba(247, 251, 250, 0.82);
        }

        .goal-chip-hero {
            position: absolute;
            top: 32px;
            right: 32px;
            background: rgba(255, 107, 107, 0.12);
            border: 1px solid rgba(255, 107, 107, 0.2);
            border-radius: 9999px;
            padding: 10px 18px;
            font-size: 0.85rem;
            font-weight: 600;
            letter-spacing: 0.08em;
            color: var(--fyf-mint);
            transform: scale(0.96);
            opacity: 0;
            animation: goalReveal 0.8s ease forwards 0.8s;
        }

        .goal-chip-hero a {
            color: var(--fyf-cream);
            text-decoration: none;
        }

        .goal-chip-hero a:hover,
        .goal-chip-hero a:focus-visible {
            text-decoration: underline;
        }

        .pillar-section {
            display: flex;
            flex-direction: column;
            gap: 16px;
            animation: fadeUp 0.22s ease 0.1s both;
        }

        .pillar-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: var(--radius-md);
            padding: 24px;
            text-align: left;
            box-shadow: var(--shadow-card);
            transition: transform 0.2s ease;
        }

        .pillar-card:hover,
        .pillar-card:focus-within {
            transform: translateY(-2px);
        }

        .pillar-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: rgba(0, 183, 183, 0.12);
            color: var(--fyf-mint);
            margin-bottom: 16px;
        }

        .pillar-card h3 {
            font-family: var(--font-body);
            font-size: 1.125rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--fyf-cream);
            margin-bottom: 8px;
        }

        .pillar-card p {
            margin: 0;
            color: rgba(247, 251, 250, 0.78);
        }

        .value-proposition {
            display: flex;
            flex-direction: column;
            gap: 16px;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: var(--radius-md);
            padding: 24px;
            animation: fadeUp 0.22s ease 0.2s both;
        }

        .value-proposition h2 {
            font-family: var(--font-body);
            font-size: 1.125rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin: 0;
            color: var(--fyf-cream);
        }

        .value-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid;
            gap: 18px;
        }

        .value-list li {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 16px;
            align-items: start;
            color: rgba(247, 251, 250, 0.78);
        }

        .value-icon {
            width: 28px;
            height: 28px;
            color: var(--fyf-mint);
        }

        .value-microcopy {
            font-size: 0.9rem;
            color: rgba(247, 251, 250, 0.7);
            letter-spacing: 0.04em;
        }

        .time-metrics-panel {
            display: flex;
            flex-direction: column;
            gap: 16px;
            background: var(--time-panel-bg);
            border: 1px solid var(--card-border);
            border-radius: var(--radius-md);
            padding: 24px;
            animation: fadeUp 0.22s ease 0.3s both;
        }

        .time-metrics-panel h2 {
            font-family: var(--font-body);
            font-size: 1.125rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin: 0;
        }

        .metric-grid {
            display: flex;
            gap: 16px;
        }

        @media (max-width: 640px) {
            .metric-grid {
                flex-direction: column;
                gap: 12px;
            }
        }

        .metric {
            flex: 1;
            text-align: center;
        }

        .metric dt {
            font-family: var(--font-body);
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.64);
            margin-bottom: 8px;
        }

        .metric dd {
            margin: 0;
            font-family: var(--font-body);
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--fyf-mint);
        }

        .metrics-microcopy {
            font-size: 0.95rem;
            color: rgba(247, 251, 250, 0.72);
            max-width: 560px;
        }

        .next-steps {
            display: flex;
            flex-direction: column;
            gap: 16px;
            animation: fadeUp 0.22s ease 0.4s both;
        }

        .next-steps h2 {
            font-family: var(--font-body);
            font-size: 1.125rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin: 0;
        }

        .next-steps-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .next-step-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: var(--radius-md);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .next-step-card header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
        }

        .next-step-card h3 {
            margin: 0;
            font-family: var(--font-body);
            font-size: 1rem;
            font-weight: 600;
            letter-spacing: 0.08em;
            color: var(--fyf-cream);
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 6px 14px;
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 700;
            letter-spacing: 0.12em;
            text-transform: uppercase;
        }

        .status-available {
            background: rgba(0, 183, 183, 0.2);
            border: 1px solid rgba(0, 183, 183, 0.35);
            color: var(--fyf-mint);
        }

        .status-coming-soon {
            background: var(--fyf-amber-soft);
            border: 1px solid rgba(255, 173, 66, 0.35);
            color: var(--fyf-amber);
        }

        .next-steps p {
            margin: 0;
            color: rgba(247, 251, 250, 0.75);
        }

        .next-steps-microcopy {
            font-size: 0.9rem;
            color: rgba(247, 251, 250, 0.68);
        }

        .goal-reminder {
            display: flex;
            flex-direction: column;
            gap: 12px;
            justify-items: center;
            text-align: center;
            animation: fadeUp 0.22s ease 0.5s both;
        }

        .goal-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            border-radius: 9999px;
            background: rgba(255, 107, 107, 0.12);
            border: 1px solid rgba(255, 107, 107, 0.2);
            color: var(--fyf-mint);
            font-size: 0.95rem;
            font-weight: 600;
            letter-spacing: 0.08em;
        }

        .goal-badge a {
            color: var(--fyf-cream);
            text-decoration: none;
        }

        .goal-badge a:hover,
        .goal-badge a:focus-visible {
            text-decoration: underline;
        }

        .goal-microcopy {
            font-size: 0.95rem;
            color: rgba(247, 251, 250, 0.75);
            max-width: 520px;
        }

        .cta-block {
            display: flex;
            flex-direction: column;
            gap: 20px;
            background: var(--card-bg);
            border-radius: var(--radius-md);
            padding: 24px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow-card);
            animation: fadeUp 0.22s ease 0.6s both;
        }

        .primary-action,
        .secondary-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .primary-button,
        .secondary-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            height: 48px;
            border-radius: var(--radius-md);
            font-family: var(--font-body);
            font-weight: 600;
            font-size: 0.95rem;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            text-decoration: none;
            position: relative;
            transition: all 0.2s ease;
        }

        .primary-button {
            background: var(--fyf-coral);
            color: white;
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
        }

        .primary-button:hover,
        .primary-button:focus-visible {
            background: var(--fyf-coral-hover);
            transform: translateY(-1px);
            box-shadow: 0 6px 16px rgba(255, 107, 107, 0.4);
        }

        .secondary-button {
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--fyf-mint);
            background: transparent;
        }

        .secondary-button:hover,
        .secondary-button:focus-visible {
            background: rgba(0, 183, 183, 0.1);
            transform: translateY(-1px);
        }

        .tertiary-link {
            font-family: var(--font-body);
            font-size: 0.9rem;
            color: rgba(247, 251, 250, 0.7);
            text-decoration: none;
            width: fit-content;
        }

        .tertiary-link:hover,
        .tertiary-link:focus-visible {
            color: var(--fyf-mint);
            text-decoration: underline;
        }

        @keyframes fadeUp {
            from {
                opacity: 0;
                transform: translateY(16px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes progressFill {
            from { transform: scaleX(0.92); }
            to { transform: scaleX(1); }
        }

        @keyframes goalReveal {
            from { opacity: 0; transform: translateY(-10px) scale(0.92); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        @media (max-width: 640px) {
            .completion-page {
                padding: 24px 16px;
            }

            .hero {
                padding: 24px;
            }

            .hero::before {
                left: 24px;
            }

            .goal-chip-hero {
                position: static;
                margin-bottom: 16px;
                display: inline-flex;
                width: 100%;
                justify-content: center;
            }

            .primary-button,
            .secondary-button {
                width: 100%;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.001ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.001ms !important;
                scroll-behavior: auto !important;
            }

            .progress-bar .progress-fill {
                animation: none;
            }
        }


        /* Focus styles */
        a:focus-visible,
        button:focus-visible {
            outline: 2px solid var(--fyf-mint);
            outline-offset: 4px;
        }
    </style>
</head>
<body>
    <div class="completion-page">
        <header class="progress-shell" aria-label="Onboarding Fortschritt">
            <div class="progress-bar" role="progressbar" aria-valuenow="8" aria-valuemin="0" aria-valuemax="8" aria-label="Finish">
                <span class="progress-fill" aria-hidden="true"></span>
            </div>
            <div class="progress-meta">
                <span class="sr-only">Finish</span>
                <span class="progress-label">Schritt 8 von 8</span>
            </div>
        </header>

        <main class="completion-content">
            <section class="hero">
                <div class="goal-chip-hero" id="goalChipHero" hidden></div>
                <h1 class="step-title hero-title">Das ist FYF.</h1>
                <p class="step-subline hero-subline">
                    Keine App. Kein Tool. Dein System, um Zeit als Vermögen zu verstehen – und bewusst einzusetzen.
                </p>
            </section>

            <section class="pillar-section">
                <div class="pillar-grid">
                    <article class="pillar-card" tabindex="0">
                        <span class="pillar-icon" aria-hidden="true">
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polygon points="10 10 16 8 14 14 8 16 10 10"></polygon>
                            </svg>
                        </span>
                        <h3>GUIDE</h3>
                        <p>Personalisierte Impulse, die zu deinem Ziel passen – nicht zu Algorithmen.</p>
                    </article>
                    <article class="pillar-card" tabindex="0">
                        <span class="pillar-icon" aria-hidden="true">
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                        </span>
                        <h3>PEOPLE</h3>
                        <p>Kuratierte Persönlichkeiten mit echten Perspektiven. Keine Influencer, sondern Haltung.</p>
                    </article>
                    <article class="pillar-card" tabindex="0">
                        <span class="pillar-icon" aria-hidden="true">
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <circle cx="12" cy="10" r="3"></circle>
                                <path d="M7 21a7 7 0 0 1 10 0"></path>
                            </svg>
                        </span>
                        <h3>ACCESS</h3>
                        <p>Erlebnisse, die deine Zeit spürbar machen – real und digital.</p>
                    </article>
                </div>
            </section>

            <section class="value-proposition">
                <h2>Was bringt dir dein Profil?</h2>
                <ul class="value-list">
                    <li>
                        <span class="value-icon" aria-hidden="true">
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                        </span>
                        <span>Dein Ziel ist dein Nordstern – alles, was du siehst, zahlt darauf ein.</span>
                    </li>
                    <li>
                        <span class="value-icon" aria-hidden="true">
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                        </span>
                        <span>Deine Zeit-Philosophie formt den Guide – keine generischen Tipps, nur was zu dir passt.</span>
                    </li>
                    <li>
                        <span class="value-icon" aria-hidden="true">
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                        </span>
                        <span>Dein Lebensstil bestimmt, wie du Impulse bekommst – in deinem Tempo, deinem Kontext.</span>
                    </li>
                </ul>
                <p class="value-microcopy">Kurz: Ab jetzt arbeitet FYF für dich – nicht andersrum.</p>
            </section>

            <section class="time-metrics-panel">
                <h2>Dein Zeitwert – du kennst ihn jetzt.</h2>
                <dl class="metric-grid" aria-live="polite">
                    <div class="metric" data-metric>
                        <dt>GELEBT</dt>
                        <dd id="weeksLivedValue">--</dd>
                    </div>
                    <div class="metric" data-metric>
                        <dt>ÜBRIG</dt>
                        <dd id="weeksRemainingValue">--</dd>
                    </div>
                    <div class="metric" data-metric>
                        <dt>ÜBRIG</dt>
                        <dd id="daysRemainingValue">--</dd>
                    </div>
                </dl>
                <p class="metrics-microcopy">Das ist dein Vermögen. Wie du es einsetzt, entscheidest nur du. Jetzt hast du die Tools dafür.</p>
            </section>

            <section class="next-steps">
                <h2>Was kommt als Nächstes?</h2>
                <div class="next-steps-grid">
                    <article class="next-step-card">
                        <header>
                            <h3>PEOPLE</h3>
                            <span class="status-badge status-available">Verfügbar</span>
                        </header>
                        <p>Menschen finden, die deine Perspektive teilen – kuratiert, nicht algorithmisch.</p>
                    </article>
                    <article class="next-step-card">
                        <header>
                            <h3>ACCESS</h3>
                            <span class="status-badge status-available">Verfügbar</span>
                        </header>
                        <p>Erlebnisse, die deine Zeit spürbar machen – real und digital.</p>
                    </article>
                    <article class="next-step-card">
                        <header>
                            <h3>GUIDE</h3>
                            <span class="status-badge status-coming-soon">Coming Soon</span>
                        </header>
                        <p>Personalisierte Impulse basierend auf deinem Profil. Bald verfügbar.</p>
                    </article>
                </div>
                <p class="next-steps-microcopy">Du kannst direkt starten – oder später wiederkommen. Dein Profil bleibt gespeichert.</p>
            </section>

            <section class="goal-reminder">
                <div class="goal-badge" id="goalBadgeMain">Dein Ziel: Noch nicht definiert (<a href="/onboarding/goal">jetzt festlegen</a>)</div>
                <p class="goal-microcopy">Alles, was du ab jetzt in FYF siehst, ist darauf ausgerichtet.</p>
            </section>

            <section class="cta-block">
                <div class="primary-action">
                    <a class="primary-button" href="/people">People entdecken &rarr;</a>
                </div>
                <div class="secondary-actions">
                    <a class="secondary-button" href="/access">Access erkunden &rarr;</a>
                    <a class="secondary-button" href="/dashboard">Dashboard ansehen &rarr;</a>
                </div>
                <a class="tertiary-link" href="/life-weeks">&larr; Zurück zu Life in Weeks</a>
            </section>
        </main>
    </div>

    <script>
        (function () {
            const prefersReducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

            function calculateTimeMetrics(birthDate, targetAge) {
                if (!birthDate || !targetAge) {
                    return { weeksLived: '--', weeksRemaining: '--', daysRemaining: '--' };
                }

                const birth = new Date(birthDate);
                if (Number.isNaN(birth.getTime())) {
                    return { weeksLived: '--', weeksRemaining: '--', daysRemaining: '--' };
                }

                const ageTarget = parseInt(targetAge, 10);
                if (!Number.isFinite(ageTarget)) {
                    return { weeksLived: '--', weeksRemaining: '--', daysRemaining: '--' };
                }

                const now = new Date();
                const target = new Date(birth);
                target.setFullYear(target.getFullYear() + ageTarget);

                const msPerWeek = 7 * 24 * 60 * 60 * 1000;
                const msPerDay = 24 * 60 * 60 * 1000;

                const lived = Math.max(0, Math.floor((now.getTime() - birth.getTime()) / msPerWeek));
                const remainingWeeks = Math.max(0, Math.floor((target.getTime() - now.getTime()) / msPerWeek));
                const remainingDays = Math.max(0, Math.floor((target.getTime() - now.getTime()) / msPerDay));

                if (Number.isNaN(lived) || Number.isNaN(remainingWeeks) || Number.isNaN(remainingDays)) {
                    return { weeksLived: '--', weeksRemaining: '--', daysRemaining: '--' };
                }

                return {
                    weeksLived: lived,
                    weeksRemaining: remainingWeeks,
                    daysRemaining: remainingDays
                };
            }

            function extractProfile() {
                const globalState = window.userProfile || window.fyfState || {};
                const profile = globalState.userProfile || globalState;

                return {
                    goal: profile.goal || globalState.goal || profile.userGoal || '',
                    birthdate: profile.birthdate || profile.birthDate || globalState.birthDate,
                    targetAge: profile.targetAge || globalState.targetAge,
                    weeksLived: profile.weeksLived,
                    weeksRemaining: profile.weeksRemaining,
                    daysRemaining: profile.daysRemaining
                };
            }

            function formatNumber(value) {
                if (value === '--' || value === undefined || value === null) {
                    return '--';
                }
                return Number(value).toLocaleString('de-DE');
            }

            function hydrateGoal(goal) {
                const heroChip = document.getElementById('goalChipHero');
                const badge = document.getElementById('goalBadgeMain');
                const fallbackLink = '<a href="/onboarding/goal">jetzt festlegen</a>';

                const hasGoal = typeof goal === 'string' && goal.trim().length > 0;
                const goalText = hasGoal ? goal.trim() : 'Noch nicht definiert (' + fallbackLink + ')';

                if (heroChip) {
                    heroChip.innerHTML = 'Dein Ziel: ' + goalText;
                    heroChip.hidden = false;
                }

                if (badge) {
                    badge.innerHTML = 'Dein Ziel: ' + goalText;
                }
            }

            function hydrateMetrics(profile) {
                const { birthdate, targetAge } = profile;
                const precomputed = {
                    weeksLived: profile.weeksLived,
                    weeksRemaining: profile.weeksRemaining,
                    daysRemaining: profile.daysRemaining
                };

                const metrics = Object.values(precomputed).some((v) => v !== undefined && v !== null)
                    ? {
                        weeksLived: precomputed.weeksLived ?? '--',
                        weeksRemaining: precomputed.weeksRemaining ?? '--',
                        daysRemaining: precomputed.daysRemaining ?? '--'
                    }
                    : calculateTimeMetrics(birthdate, targetAge);

                const mapping = {
                    weeksLivedValue: metrics.weeksLived,
                    weeksRemainingValue: metrics.weeksRemaining,
                    daysRemainingValue: metrics.daysRemaining
                };

                Object.entries(mapping).forEach(([id, value]) => {
                    const node = document.getElementById(id);
                    if (!node) return;

                    if (!prefersReducedMotion && typeof value === 'number') {
                        animateCount(node, value);
                    } else {
                        node.textContent = formatNumber(value);
                    }
                });
            }

            function animateCount(node, endValue) {
                const duration = 1600;
                const start = performance.now();

                function tick(now) {
                    const elapsed = now - start;
                    const progress = Math.min(elapsed / duration, 1);
                    const easeOut = 1 - Math.pow(1 - progress, 3);
                    const current = Math.floor(easeOut * endValue);
                    node.textContent = current.toLocaleString('de-DE');
                    if (progress < 1) {
                        requestAnimationFrame(tick);
                    } else {
                        node.textContent = endValue.toLocaleString('de-DE');
                    }
                }

                requestAnimationFrame(tick);
            }


            window.addEventListener('DOMContentLoaded', () => {
                const profile = extractProfile();
                hydrateGoal(profile.goal);
                hydrateMetrics(profile);
            });
        })();
    </script>

    <!-- Step 8 gestalterisch an Step 1-7 angepasst: Einheitliche Farben (#1a1a1a, #262626), kompakte Typografie (Inter für Fließtext, Space Grotesk nur für Hero), einfache fadeUp-Animationen statt komplexer Motion-Systeme, Coral/Mint-Progress-Bar, einheitliche Card-Styles ohne Glassmorphism. -->
</body>
</html>
